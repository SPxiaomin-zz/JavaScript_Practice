var o={x:10,foo:function(){function bar(){console.log(x),console.log(this.x)}with(this){var x=20;!function(){bar()}(),bar.call(this)}}};o.foo();